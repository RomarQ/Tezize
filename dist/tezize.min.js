var Tezize=function(t){"use strict";if(void 0===global.TextEncoder){global.TextEncoder=function(){},global.TextEncoder.prototype.encode=function(t){for(var e=t.length,_=-1,n="undefined"==typeof Uint8Array?new Array(1.5*e):new Uint8Array(3*e),r=0,I=0,o=0;o!==e;){if(r=t.charCodeAt(o),o+=1,r>=55296&&r<=56319){if(o===e){n[_+=1]=239,n[_+=1]=191,n[_+=1]=189;break}if(!((I=t.charCodeAt(o))>=56320&&I<=57343)){n[_+=1]=239,n[_+=1]=191,n[_+=1]=189;continue}if(o+=1,(r=1024*(r-55296)+I-56320+65536)>65535){n[_+=1]=240|r>>>18,n[_+=1]=128|r>>>12&63,n[_+=1]=128|r>>>6&63,n[_+=1]=128|63&r;continue}}r<=127?n[_+=1]=0|r:r<=2047?(n[_+=1]=192|r>>>6,n[_+=1]=128|63&r):(n[_+=1]=224|r>>>12,n[_+=1]=128|r>>>6&63,n[_+=1]=128|63&r)}return"undefined"!=typeof Uint8Array?n.subarray(0,_+1):(n.length=_+1,n)},global.TextEncoder.prototype.toString=function(){return"[object TextEncoder]"};try{Object.defineProperty(global.TextEncoder.prototype,"encoding",{get:function(){if(TextEncoder.prototype.isPrototypeOf(this))return"utf-8";throw TypeError("Illegal invocation")}})}catch(t){global.TextEncoder.prototype.encoding="utf-8"}"undefined"!=typeof Symbol&&(global.TextEncoder.prototype[Symbol.toStringTag]="TextEncoder")}const e=t=>{let e=t,_="";for(;;){if(!(e>=128)){e<16&&(_+="0"),_+=e.toString(16);break}{let t=e%128;e-=t,e/=128,t+=128,_+=t.toString(16)}}return _},_=t=>t.reduce((t,e)=>`${t}${e.toString(16).padStart(2,"0")}`,"");var n;!function(t){t.K_parameter="parameter",t.K_storage="storage",t.K_code="code",t.D_False="False",t.D_Elt="Elt",t.D_Left="Left",t.D_None="None",t.D_Pair="Pair",t.D_Right="Right",t.D_Some="Some",t.D_True="True",t.D_Unit="Unit",t.I_PACK="PACK",t.I_UNPACK="UNPACK",t.I_BLAKE2B="BLAKE2B",t.I_SHA256="SHA256",t.I_SHA512="SHA512",t.I_ABS="ABS",t.I_ADD="ADD",t.I_AMOUNT="AMOUNT",t.I_AND="AND",t.I_BALANCE="BALANCE",t.I_CAR="CAR",t.I_CDR="CDR",t.I_CHECK_SIGNATURE="CHECK_SIGNATURE",t.I_COMPARE="COMPARE",t.I_CONCAT="CONCAT",t.I_CONS="CONS",t.I_CREATE_ACCOUNT="CREATE_ACCOUNT",t.I_CREATE_CONTRACT="CREATE_CONTRACT",t.I_IMPLICIT_ACCOUNT="IMPLICIT_ACCOUNT",t.I_DIP="DIP",t.I_DROP="DROP",t.I_DUP="DUP",t.I_EDIV="EDIV",t.I_EMPTY_MAP="EMPTY_MAP",t.I_EMPTY_SET="EMPTY_SET",t.I_EQ="EQ",t.I_EXEC="EXEC",t.I_FAILWITH="FAILWITH",t.I_GE="GE",t.I_GET="GET",t.I_GT="GT",t.I_HASH_KEY="HASH_KEY",t.I_IF="IF",t.I_IF_CONS="IF_CONS",t.I_IF_LEFT="IF_LEFT",t.I_IF_NONE="IF_NONE",t.I_INT="INT",t.I_LAMBDA="LAMBDA",t.I_LE="LE",t.I_LEFT="LEFT",t.I_LOOP="LOOP",t.I_LSL="LSL",t.I_LSR="LSR",t.I_LT="LT",t.I_MAP="MAP",t.I_MEM="MEM",t.I_MUL="MUL",t.I_NEG="NEG",t.I_NEQ="NEQ",t.I_NIL="NIL",t.I_NONE="NONE",t.I_NOT="NOT",t.I_NOW="NOW",t.I_OR="OR",t.I_PAIR="PAIR",t.I_PUSH="PUSH",t.I_RIGHT="RIGHT",t.I_SIZE="SIZE",t.I_SOME="SOME",t.I_SOURCE="SOURCE",t.I_SENDER="SENDER",t.I_SELF="SELF",t.I_STEPS_TO_QUOTA="STEPS_TO_QUOTA",t.I_SUB="SUB",t.I_SWAP="SWAP",t.I_TRANSFER_TOKENS="TRANSFER_TOKENS",t.I_SET_DELEGATE="SET_DELEGATE",t.I_UNIT="UNIT",t.I_UPDATE="UPDATE",t.I_XOR="XOR",t.I_ITER="ITER",t.I_LOOP_LEFT="LOOP_LEFT",t.I_ADDRESS="ADDRESS",t.I_CONTRACT="CONTRACT",t.I_ISNAT="ISNAT",t.I_CAST="CAST",t.I_RENAME="RENAME",t.T_bool="bool",t.T_contract="contract",t.T_int="int",t.T_key="key",t.T_key_hash="key_hash",t.T_lambda="lambda",t.T_list="list",t.T_map="map",t.T_big_map="big_map",t.T_nat="nat",t.T_option="option",t.T_or="or",t.T_pair="pair",t.T_set="set",t.T_signature="signature",t.T_string="string",t.T_bytes="bytes",t.T_mutez="mutez",t.T_timestamp="timestamp",t.T_unit="unit",t.T_operation="operation",t.T_address="address",t.I_SLICE="SLICE",t.I_DIG="DIG",t.I_DUG="DUG",t.I_EMPTY_BIG_MAP="EMPTY_BIG_MAP",t.I_APPLY="APPLY",t.T_chain_id="chain_id",t.I_CHAIN_ID="CHAIN_ID"}(n||(n={}));const r=Object.keys(n).reduce((t,e,_)=>Object.assign(Object.assign({},t),{[e]:_.toString(16).toUpperCase().padStart(2,"0")}),{}),I=(Object.keys(n).reduce((t,e,_)=>Object.assign(Object.assign({},t),{[_.toString(16).toUpperCase().padStart(2,"0")]:e}),{}),Object.keys(n).reduce((t,e)=>Object.assign(Object.assign({},t),{[n[e]]:e}),{})),o={0:{false:"03",true:"04"},1:{false:"05",true:"06"},2:{false:"07",true:"08"}},a="00",T="01",E="02",i="09",A="0A",S=t=>{let s=[];switch(!0){case t instanceof Array:{const e=t.map(t=>S(t)).join("");s=[E,(e.length/2).toString(16).padStart(8,"0"),e]}break;case t instanceof Object:if(t.int)s=[a,e(Number(t.int))];else if(t.string){const e=(new TextEncoder).encode(t.string);s=[T,e.length.toString(16).padStart(8,"0"),[...e].map(t=>t.toString(16).padStart(2,"0")).join("")]}else if(t.prim)if(t.prim==n.I_LAMBDA){let e="";if(t.args){const _=t.args.map(t=>S(t)).join("");e=`${(_.length/2).toString(16).padStart(8,"0")}${_}`}let n="";if(t.annots){const e=t.annots.map(t=>_((new TextEncoder).encode(t))).join("20");n=`${(e.length/2).toString(16).padStart(8,"0")}${e}`}s=[i,r[I[t.prim]],e,n]}else{const e=t.args&&t.args.length||0;let n="";t.args&&(n=t.args.map(t=>S(t)).join(""));let a="";if(t.annots){const e=t.annots.map(t=>_((new TextEncoder).encode(t))).join("20");a=`${(e.length/2).toString(16).padStart(8,"0")}${e}`}s=[o[e][String(!!t.annots)],r[I[t.prim]],n,a]}else if(t.bytes){let e=t.bytes||"";s=[A,(e.length/2).toString(16).padStart(8,"0"),e]}}return s.join("")};return t.calculateSize=t=>{let e="";try{e=S("string"==typeof t?JSON.parse(t):t)}catch(t){console.error(t)}return e.length/2},t}({});